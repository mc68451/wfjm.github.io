{% comment %}
  The variable 'val' will be jsonified. This often leads to a long string 
  without blanks which can't be line wrapped by html, especially in a <td>. 
  So with some replace blanks are added between syntactic elements. Finally 
  the result is truncated to 'max', with the chopped length indicated.
{% endcomment %}
{% assign val_je = include.val | jsonify | 
    replace: '":','" : '| 
    replace: ',"',' , "'| 
    replace: '},{','} , {' %}
{% assign val_je_tr = val_je | truncate: include.max, "  ....." %}
{% assign nchop =  val_je.size | minus: val_je_tr.size %}
{% if nchop > 0 %}
  {% assign val_je_tr = val_je_tr | 
        append: "(+"  | append: nchop | append: " chars)" %}
{% endif %}
{{ val_je_tr }}
