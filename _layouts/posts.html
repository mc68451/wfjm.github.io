<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="jekyll">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="{{site.my.url_fa}}">
    <link rel="icon" href="/downloads/icons/favicon.ico" />
    <link rel="shortcut icon" href="/downloads/icons/favicon.ico" />
    <script src="{{site.my.url_jq}}"></script>
    <title>{{ page.title }}</title>
  </head>

  <body>

    <!-- prepare up/next/prev navigation in given category -->
    {% assign url_up = "/blogs/" | append: page.category | append: "/" %}
    {% for post in site.categories[page.category] %}
      {% if post.url == page.url %}
        {% assign ind_post = forloop.index0 %}
      {% endif %}
    {% endfor %}

    {% assign ind_max = site.categories[page.category].size | minus: 1 %}
    {% if ind_post > 0 %}
      {% assign ind_prev = ind_post | minus: 1 %}
      {% assign url_prev = site.categories[page.category][ind_prev].url %}
    {% endif %}
    {% if ind_post < ind_max %}
      {% assign ind_next = ind_post | plus: 1 %}
      {% assign url_next = site.categories[page.category][ind_next].url %}
    {% endif %}

    <!-- header section -->
    {% include header-common.html  up=url_up
                                   prev=url_next next=url_prev %}
 
    <!-- content section -->
    <div id="mainwrapper">
      <div id="main">
        <div class="marginwrapper">
          {{ content }}
        </div>
      </div>
    </div>
    
    <!-- navigation bar -->
    <div id="navbar"> 
      <div class="marginwrapper">
        <ul>
        </ul>
      </div>  
    </div>

    <!-- footer section -->
    {% include footer-common.html up=url_up prev=url_next next=url_prev %}

    <!-- debug footer section -->
    {% if jekyll.environment == "development" %}
      <div id="footer-debug">
        <table class="trtoggle">
          <tr>
            <th>Property</th>
            <th>Value</th>
          </tr>
          {% for item in page %}
            {% assign key = item %}
            {% assign val = page[item] %}
            <tr>
              <td class="va-top">{{key}}</td>
              <td>
                {% case key %}
                {% when "next" %}
                  <a href="{{page.next.url}}">{{page.next.url}}</a>
                {% when "previous" %}
                  <a href="{{page.previous.url}}">{{page.previous.url}}</a>
                {% when "content" %}
                  <i>too long</i>
                {% when "excerpt" %}
                  {{page.excerpt | strip_html | truncate: 500 }}
                {% else %}
                  {% include dump_variable.html val=val max="200" %}
                {% endcase %}
              </td>
            </tr>
          {% endfor %}
        </table>
      </div>
    {% endif %}

    <!-- directly included scripts -->
    {%include script-hover-link.html %}

  </body>

</html>
