<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="generator" content="jekyll">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="{{site.my.url_fa}}">
    <link rel="icon" href="/downloads/icons/favicon.ico" />
    <link rel="shortcut icon" href="/downloads/icons/favicon.ico" />
    <title>{{ page.title }}</title>
  </head>

  <body>
    <script src="{{site.my.url_jq}}"></script>

    <!-- prepare next/prev navigation in given category -->
    {% for post in site.categories[page.category] %}
      {% if post.url == page.url %}
        {% assign post_ind = forloop.index0 %}
      {% endif %}
    {% endfor %}

    {% assign max_ind = site.categories[page.category].size | minus: 1 %}
    {% if post_ind > 0 %}
      {% assign prev_ind = post_ind | minus: 1 %}
      {% assign prev_url = site.categories[page.category][prev_ind].url %}
    {% endif %}
    {% if post_ind < max_ind %}
      {% assign next_ind = post_ind | plus: 1 %}
      {% assign next_url = site.categories[page.category][next_ind].url %}
    {% endif %}

   <!-- header section -->
    <table id="header"> 
      <tr id="header-top">
        <td id="header-toplogo" rowspan="2">
          <img height="80" src="/downloads/icons/retro-logo.svg"
               alt="wfjm's retro logo">
        </td>
        <td id="header-toptitle" colspan="2">
          {{ page.title }}
        </td>
      </tr>
      <tr id="header-bot">
        <td id="header-botpath">
          {% assign headnavlink = "" %}
          {% for e in pageplist %}
            {% if e != "index.html" %}
              {% assign headnavlink = headnavlink | append: "/" | append: e %}
              / 
              {% unless forloop.last %}
                <a href="{{headnavlink}}"> {{e}} </a>
              {% else %}
                {{e}}
              {% endunless %}
            {% endif %}
          {% endfor %}
        </td>
        <td id="header-botnav">
          <a href="/">
            <i class="fa fa-home abutton"></i></a>
          <a href="/blogs/{{page.category}}/">
            <i class="fa fa-arrow-up abutton"></i></a>
          {% if next_url %}
            <a href="{{next_url}}">
              <i class="fa fa-arrow-left abutton"></i></a>
          {% endif %}
          {% if prev_url %}
            <a href="{{prev_url}}">
              <i class="fa fa-arrow-right abutton"></i></a>
          {% endif %}
        </td>
      </tr>
    </table>
   
    <!-- content section -->
    <div id="mainwrapper">
      <div id="main">
        <div class="marginwrapper">
          {{ content }}
        </div>
      </div>
    </div>
    
    <!-- navigation bar -->
    <div id="navbar"> 
      <div class="marginwrapper">
        <ul>
        </ul>
      </div>  
    </div>

    <!-- footer section -->
    <div id="footer">
      <table>
        <tr>
          <td id="footer-about">
            <a class="abutton" href="/about/">about</a>
            <span id="footer-about-tools">
              <a href="/debug/">
                <i class="fa fa-life-saver abutton"></i></a>
              <a href="https://validator.w3.org/check/referer">
                <i class="fa fa-html5 abutton"></i></a>
              <a href="https://validator.w3.org/checklink?uri={{site.url}}{{page.url}}">
                <i class="fa fa-link abutton"></i></a>
            </span>
          </td>
          <td id="footer-time">
            <em> posted on {{page.date | slice: 0,10}} </em>
          </td>
          <td id="footer-nav">
            <a href="/">
              <i class="fa fa-home abutton"></i></a>
            <a href="/blogs/{{page.category}}/">
              <i class="fa fa-arrow-up abutton"></i></a>
            {% if next_url %}
              <a href="{{next_url}}">
                <i class="fa fa-arrow-left abutton"></i></a>
            {% endif %}
            {% if prev_url %}
              <a href="{{prev_url}}">
                <i class="fa fa-arrow-right abutton"></i></a>
            {% endif %}
  
         </td>
        </tr>
      </table>
    </div>

    <!-- debug footer section -->
    {% if jekyll.environment == "development" %}
      <div id="footer-debug">
        <table class="trtoggle">
          <tr>
            <th>Property</th>
            <th>Value</th>
          </tr>
          {% for item in page %}
            {% assign key = item %}
            {% assign val = page[item] %}
            <tr>
              <td class="va-top">{{key}}</td>
              <td>
                {% case key %}
                {% when "next" %}
                  <a href="{{page.next.url}}">{{page.next.url}}</a>
                {% when "previous" %}
                  <a href="{{page.previous.url}}">{{page.previous.url}}</a>
                {% when "content" %}
                  <i>too long</i>
                {% when "excerpt" %}
                  {{page.excerpt | strip_html | truncate: 500 }}
                {% else %}
                  {% include dump_variable.html val=val max="200" %}
                {% endcase %}
              </td>
            </tr>
          {% endfor %}
        </table>
      </div>
    {% endif %}

    <!-- directly included scripts -->
    {%include script-hover-link.html %}

  </body>

</html>
