---
category: w11
title: "Released w11a V0.74"
---

<h2>Summary</h2>
<ul>
  <li>upgraded CRAM controller, now with 'page mode' support</li>
  <li>new test bench driver tbrun, give automatized test bench execution</li>
</ul>
<h2>In Detail</h2>
<ul>
  <li>the current version of the  memory controller for the micron mt45w8mw16b
      'cellular ram' used on nexys2, nexys3, and nexys4 uses the asynchronous
      access mode. The device supports a 'page mode' to speed up read access to
      subsequent addresses. Even though prepared in the controller logic this
      feature was simply forgotten. This is now properly implemented and 
      results in a bit faster cache line load times. The overall performance
      of a w11a design is measurably, but marginally better.
  </li>
  <li>many unit tests still used a ISE environment. All board independent
      tests were converted now to a vivado environment, only tests which
      really depend a FPGA not supported by vivado stay with ISE.
  </li>
  <li>a total of 82 unit or system tests are currently available. Many of them
      can be executed by different simulation engines, ghdl or the ISE/vivado 
      build-in simulators, and for different stages of the implementation flow, 
      from initial behavioral simulation over post-synthesis functional to final 
      post-routing timing simulation. This results in a large number of possible
      tests. All test benches are all self-checking, but the execution of them
      was so far not sufficiently automatized.
      This was addressed with 'tbrun', a test bench driver, which obtains a
      list of all available test benches from configuration files, selects
      a subset given by selection criteria, and executes them. It can handle
      the parallel execution of tests so multi-core systems can be very
      easily exploited. Running all tests is now a single shell command.
  </li>
  <li>a new tool 'tbfilt' simplifies the logic of self-checking test benches
      and can also be used as a tool to analyze the full log files produced
      by the test benches
  </li>
  <li>several test benches have been added to this release, most notably the
      memory tester sys_tst_sram_* which was originally developed to verify
      the s3board SRAM controller and later ported to verify the nexys* CRAM
      controller.
  </li>
  <li>the system test benches with SRAM and CRAM now include the PCB trace
      delay between FPGA and memory chip. The new entity simbididly models a
      bi-directional bus delay.
  </li>
  <li>so far test benches ended by stopping the clock, all processes were 
      written such that they enter a permanent wait, which causes the simulation
      to stop. Worked for fine behavioral simulations, but fails when Xilinx 
      MMCMs are involved in post-synthesis simulations. The UNISIM models 
      apparently have timed waits. The test benches were modified to stop via a
      report with severity failure, the test environment detects this specific
      assertion/report failure and accepts it as successful termination of
      the simulation.
  </li>
  <li>the configuration of the board switches in system test benches was done
      in a sub-optimal way which could lead to startup problems. tbrun_tbwrri
      uses now a different mechanism which ensures that all board and test
      bench configuration is done in the first ns of the simulation and has
      thus completed well before all other activities.
  </li>
  <li>finally a caveat: post-synthesis simulations work fine with ISE, but
      currently not with vivado, even in case of almost identical designs,
      like sys_tst_rlink_n3 vs sys_tst_rlink_n4. Is under investigation.
  </li>
</ul>
